/*
******************************************************************************
**
** Project     : 
** Description :    I2s driver
** Author      :                               
** Date        : 
**    
** UpdatedBy   : 
** UpdatedDate : 
**
******************************************************************************
*/
#include "includes.h"
#include "i2s.h"
#include "dma.h"
#include "reg.h"

#ifdef HW_I2S_SUPPORT
#pragma arm section rwdata="win_data"   
int regdat = 0;
int stat = 0;
int pwm_on = 0;
unsigned int loop = 0;
//8K audio data for I2S test, it sounds like a short ring
//Limited in RAM size,the sound is a little unpleasant to hear
//should be delete after test
unsigned short buf0[0x2000] = {
20,90,14,126,65523,138,65488,114,65437,45,65381,65432,65326,65231,65270,65030,
65222,64894,65170,64811,65081,64740,64988,64719,64912,64840,64885,65097,64925,65359,64974,19,
65035,209,65097,309,65177,283,65205,127,65209,65441,65136,65099,64990,64669,64819,64374,
64760,64419,64868,64867,65129,56,65473,770,379,1397,892,1904,1332,2169,1546,2039,
1403,1477,908,629,234,65314,65058,64687,64432,64341,64087,64292,64113,64513,64412,64854,
64893,65217,65406,29,363,303,732,414,886,236,828,65269,643,64626,415,64136,
114,63895,65295,63858,64987,64101,64822,64664,64842,65407,65079,609,72,1273,830,1855,
1535,2183,1922,2073,1880,1587,1435,923,756,284,35,65247,65054,64809,64769,64662,
64655,64797,64668,65123,64776,6,65080,521,43,1038,551,1346,927,1242,1118,650,
1093,65251,816,64202,288,63184,65035,62419,64099,62094,63226,62255,62600,62823,62456,63650,
62950,64650,64006,210,65334,1220,932,1917,1608,2199,1773,2119,1549,1797,1114,1263,
599,635,65470,65486,64673,64725,63932,64041,63525,63674,63745,63753,64500,64201,65510,64829,
844,65329,1349,65506,1481,65443,1344,65253,1000,64997,439,64761,65176,64584,64239,64460,
63435,64477,63046,64736,63231,65231,63867,344,64672,1014,65337,1494,274,1685,598,1593,
880,1238,1279,778,1678,418,1870,147,1688,65425,1212,65237,740,65296,391,65532,
225,321,202,675,227,859,172,756,65516,320,65280,65198,65037,64513,64712,63969,
64296,63618,63879,63486,63658,63678,63764,64238,64200,65119,64991,704,416,1846,1263,2683,
1783,3092,1983,3006,1991,2488,1987,1735,1982,1022,1782,335,1208,65202,321,64641,
64793,64148,63863,63794,63389,63771,63414,64023,63785,64382,64232,64711,64643,64919,65112,65020,
184,65084,789,65197,1094,65234,955,65178,477,65111,65449,65075,65121,65212,65260,74,
246,608,844,1081,1184,1329,1196,1317,901,1049,385,630,65200,76,64229,64952,
63088,64360,61948,63858,60992,63408,60592,63171,61079,63307,62468,63777,64356,64467,632,65330,
1973,641,2716,1286,2915,1652,2539,1651,1615,1318,393,856,64618,297,63487,65269,
62934,64914,63337,64924,64692,65228,854,153,2343,673,3363,1101,3850,1367,3869,1442,
3315,1244,2218,858,669,382,64303,65236,62380,64427,61047,63761,60946,63522,62169,63780,
64217,64459,889,65371,2654,672,3695,1317,4012,1683,3694,1717,2822,1517,1447,1122,
65228,481,63425,65223,62245,64542,62230,64159,63356,64118,65105,64400,1243,64814,2454,65183,
3045,65505,3011,253,2429,514,1309,755,65201,834,63108,539,60932,65424,59374,64678,
59062,64041,60131,63653,62244,63667,64717,64030,1412,64647,3038,65389,3903,511,4018,931,
3399,1114,2124,1015,246,564,63593,65403,61768,64653,60999,64013,61618,63744,63371,63957,
64,64530,2205,65312,3867,600,4859,1230,5062,1593,4444,1698,3033,1509,867,962,
63911,220,61805,64997,60800,64393,61192,64150,62731,64306,64890,64773,1527,65450,3244,605,
4211,1083,4343,1341,3666,1425,2241,1248,156,771,63277,113,61147,64921,59944,64317,
60037,64014,61310,64067,63295,64421,65494,65032,1917,254,3292,928,3878,1446,3630,1770,
2482,1760,471,1422,63494,808,61193,65526,59860,64721,59926,64173,61296,63970,63558,64128,
613,64613,3024,65291,4830,443,5790,1132,5819,1674,4763,1818,2624,1501,65228,784,
62252,65380,60122,64475,59447,63785,60313,63424,62347,63518,64939,64074,1941,64850,3928,126,
5114,937,5407,1597,4696,1920,2928,1834,323,1305,63045,455,60839,65046,59898,64186,
60389,63593,62083,63446,64497,63803,1417,64428,3322,65188,4461,468,4707,1095,3972,1343,
2198,1178,65159,635,62397,65395,60241,64583,59388,63937,60068,63646,62134,63934,65090,64840,
2620,513,5125,1789,6702,2959,7189,3738,6486,3962,4623,3600,1856,2698,64286,1429,
61706,93,60340,64402,60484,63511,62048,63283,64518,63734,1612,64634,3813,279,5269,1493,
5838,2458,5390,2980,3787,2931,1178,2270,63628,1133,60873,65283,59212,63857,59046,62772,
60449,62414,62988,62753,442,63626,3174,64874,5219,718,6337,1928,6324,2704,5055,2852,
2594,2325,64928,1277,61754,65388,59411,63787,58526,62453,59293,61763,61348,61793,64035,62506,
1119,63750,3235,65213,4591,1005,4991,1966,4206,2304,2122,1930,64678,1015,61568,65196,
59225,63658,58366,62397,59237,61697,61530,61670,64511,62311,1978,63502,4476,64965,6183,880,
6872,2033,6290,2628,4263,2549,1122,1846,63133,570,60174,64533,58572,63147,58710,62308,
60347,62137,62832,62622,65516,63662,2336,65028,4079,911,4964,2120,4680,2794,3121,2887,
497,2456,62974,1481,60379,222,59033,64596,59432,63858,61396,63689,64334,64153,1952,65149,
4678,885,6621,2168,7537,3129,7157,3519,5410,3335,2504,2623,64591,1417,61516,4,
59657,64333,59487,63569,60918,63350,63430,63783,749,64729,3296,437,5221,1764,6227,2763,
6090,3228,4683,3155,2178,2566,64632,1463,61800,78,60048,64298,59831,63308,61121,62840,
63465,62988,600,63632,3019,64664,4830,320,5753,1281,5535,1807,4098,1898,1582,1473,
63989,553,60985,64911,58904,63789,58293,62952,59268,62615,61471,62843,64234,63567,1451,64756,
3779,609,5309,1784,5701,2529,4765,2777,2584,2446,65068,1511,61893,221,59501,64434,
58553,63354,59289,62796,61390,62810,64227,63398,1672,64539,4318,418,6237,1717,7049,2650,
6528,3083,4662,2921,1742,2156,64048,985,61387,65249,60082,64217,60445,63683,62267,63667,
64918,64203,2206,65236,4658,928,6300,2008,6841,2695,6121,2903,4075,2483,1017,1525,
63177,270,60339,64501,58832,63454,59023,62913,60679,62940,63250,63606,620,64848,3323,754,
5367,1972,6445,2750,6270,2986,4672,2586,1850,1595,63954,187,60766,64172,58715,62900,
58322,62129,59550,61960,61936,62504,64924,63712,2346,65224,4784,1117,6337,2238,6606,2794,
5380,2675,2831,1929,65010,648,61650,64690,59228,63384,58300,62441,58959,61993,60880,62235,
63591,63185,943,64524,3472,360,5193,1508,5735,2168,4916,2249,2813,1752,65344,724,
62177,64990,59792,63818,58839,62926,59445,62465,61367,62687,64063,63596,1405,64931,3904,852,
5585,2123,6078,2897,5246,3063,3148,2557,146,1477,62515,157,60075,64470,58997,63513,
59425,63015,61197,63241,63826,64124,1241,65442,3973,1371,6006,2629,6990,3443,6691,3681,
5077,3238,2383,2214,64802,919,62155,65193,60658,64104,60585,63458,61808,63489,63925,64158,
880,65291,3246,1075,5028,2261,5892,3062,5615,3347,4076,2948,1468,1937,63871,608,
61115,64755,59420,63487,59153,62694,60320,62595,62497,63156,65217,64260,2440,111,4758,1449,
6211,2450,6455,2871,5266,2548,2771,1565,65087,204,62045,64234,59897,62790,59144,61811,
59807,61529,61587,61974,64023,63115,1029,64653,3178,721,4542,2084,4872,2937,3913,3027,
1745,2411,64376,1333,61504,65489,59444,64093,58706,63036,59346,62539,61161,62731,63711,63580,
898,64851,3281,667,4899,1853,5474,2596,4792,2683,2867,2160,126,1179,62805,65390,
60608,63965,59619,62819,60019,62205,61632,62294,64040,63074,1191,64320,3610,244,5363,1677,
6117,2707,5611,3108,3835,2944,1109,2260,63641,1139,61183,65349,59878,64140,59997,63372,
61404,63225,63723,63697,914,64626,3467,250,5450,1437,6510,2328,6310,2717,4784,2613,
2169,1997,64647,959,61955,65283,60262,64169,59897,63440,60840,63282,62795,63683,65299,64578,
2260,257,4299,1505,5492,2396,5509,2743,4233,2528,1861,1775,64511,604,61841,64777,
60083,63508,59619,62626,60495,62367,62478,62712,65077,63557,2191,64810,4389,618,5745,1673,
5931,2232,4764,2212,2378,1603,64881,531,61973,64753,59932,63466,59147,62511,59763,62164,
61557,62458,64048,63281,1172,64570,3473,430,5007,1583,5375,2242,4409,2357,2211,1910,
64779,951,61795,65203,59511,63854,58374,62798,58593,62276,60062,62319,62362,62959,64989,64123,
1903,65476,3741,1140,4570,1940,4161,2224,2527,1968,71,1228,62989,151,60883,64487,
59816,63512,60028,62999,61419,62997,63663,63605,725,64737,3205,575,5180,1891,6217,2898,
6014,3388,4583,3311,2233,2687,65076,1587,62707,297,61245,64719,60983,63960,61970,63673,
63917,64020,838,64950,3323,682,5335,1953,6469,2962,6397,3523,5060,3546,2702,2996,
65394,1869,62750,445,60914,64651,60276,63612,60945,63062,62681,63167,65052,63900,1988,65021,
4105,699,5370,1729,5443,2311,4251,2385,2057,1917,64835,932,62189,65253,60311,64101,
59615,63202,60208,62774,61898,62978,64300,63806,1396,65024,3712,802,5217,1903,5517,2588,
4533,2783,2439,2369,65212,1379,62441,93,60317,64330,59329,63241,59637,62625,61127,62661,
63440,63353,594,64517,3133,332,4995,1556,5755,2429,5265,2855,3583,2640,1037,1777,
63775,535,61417,64701,60133,63471,60141,62666,61433,62519,63644,63042,774,64106,3374,65434,
5307,1132,6175,2110,5768,2667,4134,2586,1602,1891,64304,833,61843,65159,60351,64041,
60168,63297,61311,63142,63480,63661,693,64733,3504,579,5734,1888,6912,2941,6761,3535,
5279,3487,2765,2801,65351,1690,62659,386,60851,64662,60312,63740,61055,63341,62877,63557,
65390,64370,2511,65507,4701,1158,5981,2194,6071,2825,4892,2836,2640,2222,65361,1170,
62644,65386,60681,64058,59889,63034,60347,62514,61923,62704,64266,63536,1318,64727,3614,489,
5084,1690,5402,2527,4465,2738,2394,2329,65129,1390,62258,88,60035,64252,58914,63103,
59111,62469,60525,62566,62825,63356,65496,64576,2380,419,4038,1712,4623,2611,3986,2873,
2242,2503,65310,1590,62699,294,60637,64436,59606,63216,59815,62474,61175,62431,63455,63062,
666,64190,3282,47,5219,1450,6070,2517,5650,3019,4003,2868,1470,2096,64147,873,
61621,65007,59995,63684,59639,62772,60593,62539,62640,62989,65359,63961,2566,65282,4748,1133,
5955,2246,5984,2878,4817,2917,2682,2357,131,1337,63315,63,61659,64293,61046,63293,
61595,62897,63230,63154,58,63990,2558,65228,4565,1033,5626,2134,5556,2776,4306,2818,
2123,2274,65014,1261,62512,65473,60688,64101,59884,63021,60264,62522,61783,62656,64070,63353,
1064,64516,3238,322,4554,1491,4751,2230,3773,2355,1804,1859,64829,851,62330,65041,
60386,63599,59403,62462,59624,61905,61033,61991,63317,62692,397,63880,2736,65254,4299,986,
4785,1872,4076,2187,2307,1881,65388,1021,62804,65276,60699,63863,59540,62721,59599,62086,
60901,62048,63169,62647,346,63769,2896,65171,4765,973,5555,1970,5106,2430,3490,2305,
1115,1650,64027,536,61723,64739,60223,63547,59863,62764,60801,62544,62824,62985,65430,64004,
2479,65385,4504,1286,5578,2446,5491,3109,4214,3158,2055,2612,65082,1551,62788,225,
61175,64499,60651,63537,61388,63131,63233,63392,188,64234,2757,65430,4840,1157,5989,2192,
5993,2793,4844,2889,2813,2441,351,1479,63486,240,61627,64557,60737,63593,61051,63100,
62504,63204,64758,63890,1743,65029,3943,780,5297,1859,5496,2484,4506,2577,2592,2111,
178,1145,63290,65443,61325,64144,60289,63064,60450,62421,61805,62394,64014,63013,974,64133,
3199,65483,4664,1184,5068,2070,4305,2481,2526,2255,130,1453,63157,292,61006,64558,
59711,63439,59599,62711,60706,62538,62791,63008,65344,64036,2288,65346,4118,1050,4910,1995,
4520,2474,3075,2352,919,1660,64022,571,61825,64829,60397,63653,60140,62868,61123,62630,
63146,63027,199,64004,2761,65287,4737,1004,5696,2027,5433,2606,4032,2589,1818,2004,
64731,969,62267,65266,60554,64094,59987,63241,60724,62899,62606,63229,65202,64181,2371,65449,
4594,1228,5874,2396,5930,3152,4837,3323,2832,2840,322,1854,63365,611,61457,64894,
60601,63879,60989,63306,62553,63368,64908,64072,1950,65145,4178,799,5543,1872,5737,2598,
4833,2818,3045,2476,665,1619,63645,439,61519,64720,60374,63679,60501,63073,61883,63122,
64116,63765,1127,64780,3403,399,4842,1465,5164,2192,4337,2402,2525,2059,46,1228,
62947,93,60730,64422,59414,63339,59333,62653,60503,62596,62637,63151,65270,64141,2213,65325,
3970,931,4652,1787,4219,2173,2806,2011,646,1330,63724,323,61520,64732,60111,63650,
59857,62918,60830,62805,62809,63290,65385,64270,2403,65507,4279,1196,5136,2158,4895,2683,
3604,2637,1528,2046,64573,1047,62217,65362,60522,64145,59899,63272,60507,62982,62239,63298,
64699,64118,1766,65275,3858,971,5055,2007,5205,2646,4321,2733,2544,2260,260,1412,
63497,329,61736,64744,60957,63840,61365,63403,62913,63562,65262,64294,2275,65419,4387,1107,
5627,2188,5819,2925,4933,3112,3109,2695,682,1785,63667,526,61565,64725,60421,63607,
60468,62980,61689,62904,63838,63417,808,64389,3050,55,4597,1259,5204,2195,4736,2596,
3286,2427,1115,1731,64158,617,61938,64839,60468,63660,60131,62902,61045,62728,62967,63163,
65367,64041,2074,65191,3681,860,4364,1806,4033,2275,2738,2168,709,1536,63853,482,
61594,64742,59995,63536,59462,62668,60195,62365,62060,62709,64510,63567,1403,64740,3291,435,
4281,1444,4253,2028,3226,2090,1359,1599,64595,622,62395,64934,60767,63754,60162,62911,
60781,62597,62470,62862,64806,63615,1633,64747,3504,492,4556,1613,4629,2335,3756,2556,
2075,2251,65440,1456,63222,354,61456,64735,60643,63826,61039,63387,62576,63507,64845,64169,
1741,65247,3770,971,5017,2099,5296,2850,4521,3126,2843,2849,608,2052,63795,931,
61810,65229,60667,64158,60715,63497,61964,63366,64056,63815,903,64760,2995,398,4399,1492,
4915,2276,4440,2624,3043,2410,979,1687,64170,606,62054,64942,60719,63923,60518,63290,
61506,63154,63402,63541,151,64439,2229,96,3694,1271,4292,2144,3908,2527,2614,2338,
619,1632,63851,543,61698,64797,60244,63627,59900,62834,60772,62586,62634,62914,64965,63793,
1678,64977,3432,650,4424,1686,4425,2313,3452,2376,1712,1863,65048,877,62841,65209,
61160,64049,60494,63177,61026,62736,62664,62882,64936,63620,1727,64746,3648,430,4789,1510,
4921,2210,4072,2387,2405,2000,195,1128,63447,65513,61672,64380,60879,63522,61345,63092,
62916,63220,65148,63902,1978,64973,4034,673,5375,1823,5764,2650,5157,2994,3662,2782,
1522,2037,64657,937,62572,65280,61350,64234,61361,63587,62545,63529,64494,64070,1186,65038,
3188,646,4528,1710,4974,2509,4407,2826,2918,2552,794,1737,63969,580,61860,64858,
60563,63729,60426,62952,61488,62719,63451,63108,283,64050,2554,65323,4235,1072,5016,2105,
4779,2665,3571,2656,1562,2066,64625,1046,62229,65360,60580,64149,60131,63252,60880,62887,
62574,63107,64825,63849,1596,64944,3440,600,4417,1646,4408,2320,3415,2428,1601,1941,
64837,1036,62549,65430,60855,64269,60215,63360,60765,62928,62359,63094,64584,63813,1392,64932,
3343,665,4575,1828,4899,2632,4245,2873,2679,2499,511,1641,63718,488,61821,64804,
60883,63794,61124,63214,62443,63226,64517,63836,1321,64896,3368,633,4757,1853,5251,2750,
4778,3087,3383,2822,1276,2035,64424,888,62439,65195,61366,64144,61414,63523,62565,63474,
64500,63951,1223,64851,3265,455,4698,1644,5260,2540,4854,2930,3525,2727,1412,1966,
64462,815,62221,65039,60790,63854,60483,63038,61371,62794,63241,63167,32,64031,2229,65169,
3864,820,4629,1782,4469,2298,3399,2298,1491,1765,64647,794,62369,65127,60760,63963,
60183,63093,60775,62718,62377,62926,64554,63650,1221,64723,2992,392,4030,1438,4135,2055,
3269,2113,1510,1614,64712,649,62350,64958,60547,63736,59720,62782,60077,62319,61485,62431,
63603,63082,388,64167,2358,65459,3664,1109,4135,1889,3606,2092,2121,1708,1,861,
63287,65268,61473,64090,60585,63119,60856,62575,62211,62590,64305,63171,1052,64212,3027,65462,
4343,1085,4822,1928,4346,2274,2926,2080,867,1414,64174,391,62287,64793,61240,63831,
61308,63271,62465,63225,64416,63696,1120,64622,3155,306,4601,1519,5226,2419,4917,2827,
3646,2677,1604,2002,64762,953,62605,65266,61233,64170,60987,63449,61855,63218,63605,63518,
206,64293,2243,65413,3800,1050,4659,2009,4599,2509,3552,2452,1698,1859,64950,833,
62761,65166,61280,64081,60891,63332,61634,63039,63295,63283,65380,64022,1845,65088,3437,700,
4358,1643,4364,2187,3413,2227,1612,1745,64848,791,62593,65137,60908,63982,60206,63087,
60665,62605,62122,62651,64167,63277,769,64336,2566,23,3704,1150,3966,1860,3275,2062,
1713,1736,65103,930,62887,65374,61145,64236,60307,63291,60598,62706,61928,62672,63896,63201,
540,64187,2539,65411,3999,1026,4620,1843,4268,2224,2920,2039,854,1308,64121,249,
62180,64645,61090,63678,61150,63058,62295,62929,64199,63384,860,64329,2924,11,4503,1236,
5266,2155,5030,2589,3780,2487,1789,1898,65052,983,63021,65481,61722,64499,61470,63761,
62291,63468,63897,63732,405,64506,2404,70,3990,1203,4808,2076,4638,2487,3464,2324,
1498,1685,64679,737,62494,65208,61066,64193,60728,63412,61494,63034,63049,63174,65046,63859,
1556,64924,3259,553,4282,1560,4311,2168,3303,2234,1451,1754,64663,858,62398,65325,
60754,64293,60145,63480,60642,63025,62090,63078,64121,63680,730,64696,2604,321,3842,1346,
4146,2011,3388,2159,1709,1778,64958,1012,62562,65517,60706,64416,59869,63496,60172,62951,
61479,62921,63473,63457,222,64431,2308,59,3813,1168,4406,1962,3953,2244,2537,1974,
441,1249,63687,256,61818,64767,60812,63889,60837,63296,61849,63158,63608,63580,216,64493,
2294,163,3913,1368,4721,2305,4544,2736,3413,2572,1528,1920,64850,970,62904,65438,
61712,64419,61567,63692,62483,63483,64184,63851,756,64705,2842,295,4483,1436,5338,2326,
5228,2776,4125,2702,2182,2147,65360,1237,63136,135,61586,64561,61043,63702,61561,63289,
62967,63453,64963,64150,1605,65208,3445,839,4553,1821,4678,2363,3776,2360,1995,1838,
65272,991,63082,65500,61492,64474,60826,63643,61190,63202,62435,63275,64283,63841,815,64789,
2652,384,3845,1371,4184,1942,3543,1995,1997,1584,65381,789,63168,65310,61396,64245,
60469,63328,60579,62809,61652,62825,63427,63379,65512,64349,1897,65507,3255,1027,3784,1717,
3300,1864,1891,1522,65374,782,63157,65294,61350,64191,60370,63221,60411,62596,61451,62459,
63290,62893,65534,63823,2143,65040,3738,696,4481,1537,4223,1873,2969,1702,981,1126,
64261,263,62313,64822,61139,63928,60977,63335,61817,63180,63486,63548,93,64416,2226,41,
3924,1229,4844,2147,4828,2631,3829,2625,2005,2146,65349,1322,63323,306,61983,64881,
61581,64184,62179,63874,63653,64079,106,64760,2165,241,3897,1358,4948,2268,5080,2773,
4237,2808,2556,2392,382,1586,63802,572,62250,65088,61524,64251,61831,63810,63101,63873,
64987,64463,1478,65442,3208,1012,4316,1937,4542,2479,3786,2558,2138,2202,65533,1453,
63412,454,61777,64940,60975,64052,61153,63512,62285,63461,64065,63925,585,64816,2447,355,
3753,1323,4183,1957,3607,2161,2115,1912,52,1236,63425,285,61597,64746,60509,63745,
60439,63063,61392,62855,63077,63179,65118,63972,1544,65034,3026,514,3713,1231,3469,1548,
2255,1429,370,907,63846,97,62042,64667,60895,63749,60685,63099,61491,62887,63109,63202,
65208,64013,1814,65151,3543,748,4517,1621,4507,2077,3525,2066,1812,1594,65312,776,
63409,65351,62114,64455,61713,63797,62310,63532,63710,63764,74,64515,2080,84,3791,1247,
4818,2194,4883,2752,3936,2850,2199,2466,88,1699,63563,733,61985,65261,61273,64394,
61584,63869,62786,63829,64580,64342,1018,65216,2797,684,3982,1558,4321,2159,3701,2355,
2189,2061,143,1366,63577,425,61897,64925,61027,64008,61103,63408,62115,63305,63851,63757,
392,64640,2342,153,3707,1063,4170,1668,3614,1846,2175,1585,163,934,63531,24,
61659,64560,60527,63647,60381,63017,61256,62857,62884,63239,64868,64062,1304,65102,2848,574,
3626,1335,3394,1680,2264,1562,463,1034,63947,240,62158,64855,61045,63950,60875,63291,
61651,63098,63223,63452,65232,64277,1759,65345,3406,873,4248,1715,4149,2194,3162,2211,
1482,1781,65027,1042,63163,125,61886,64760,61521,64058,62123,63750,63555,63962,65529,64672,
2112,166,3922,1269,4990,2180,5110,2695,4272,2803,2674,2498,701,1848,64315,975,
62877,11,62243,64713,62540,64234,63672,64232,65403,64725,1831,39,3560,991,4686,1828,
4952,2376,4269,2481,2777,2153,779,1476,64253,564,62635,65134,61804,64275,61848,63724,
62763,63666,64369,64112,769,64922,2567,345,3791,1212,4196,1812,3703,2020,2380,1791,
482,1185,63935,289,62161,64789,61109,63811,60957,63149,61699,62967,63196,63295,65111,64064,
1434,65065,2815,487,3434,1161,3159,1417,2009,1228,226,662,63749,65316,61990,64282,
60900,63283,60678,62604,61360,62427,62876,62777,64906,63540,1434,64547,3105,57,4023,924,
4011,1408,3070,1421,1423,1013,64952,296,63078,64905,61806,63984,61398,63318,61936,63103,
63374,63394,65402,64145,2014,65196,3804,763,4851,1631,5001,2126,4240,2220,2700,1930,
689,1278,64246,356,62766,64935,62061,64206,62330,63891,63548,64075,65431,64724,2027,172,
3852,1248,4967,2126,5196,2668,4505,2792,2994,2490,986,1814,64488,856,62854,65333,
61920,64407,61920,63847,62859,63769,64513,64200,976,65018,2823,456,4094,1365,4549,2008,
4058,2250,2716,2045,791,1417,64254,487,62520,64994,61459,64071,61298,63450,62123,63280,
63717,63606,118,64323,1925,65248,3242,607,3813,1270,3489,1587,2288,1550,441,1086,
63905,232,62095,64745,60858,63760,60498,63067,61120,62798,62578,63012,64527,63640,957,64508,
2521,65426,3374,640,3356,1079,2461,1135,899,770,64590,49,62815,64676,61501,63755,
60988,63051,61438,62764,62762,62980,64620,63640,1035,64578,2697,58,3726,942,3920,1535,
3219,1737,1779,1499,65482,853,63641,65453,62224,64475,61540,63713,61785,63364,62920,63495,
64695,64096,1122,65027,2838,509,3974,1405,4298,2060,3742,2355,2410,2195,587,1575,
64190,630,62561,65123,61629,64213,61596,63657,62490,63576,64104,63975,476,64749,2225,121,
3444,973,3872,1606,3394,1934,2193,1873,485,1391,64107,570,62396,65122,61285,64214,
61082,63594,61837,63407,63308,63723,65163,64453,1444,65357,2841,680,3497,1378,3251,1775,
2162,1776,452,1337,64006,542,62148,65086,60852,64113,60422,63426,60959,63165,62305,63373,
64151,63991,551,64820,2114,161,2981,891,3027,1363,2243,1452,805,1069,64527,332,
62781,64932,61501,64018,61052,63349,61570,63120,62945,63393,64871,64070,1338,64970,3016,356,
4030,1199,4213,1795,3549,2014,2178,1790,373,1173,64075,303,62636,64930,61993,64206,
62286,63847,63446,63966,65210,64513,1657,65351,3434,781,4614,1714,4957,2427,4441,2770,
3171,2635,1390,2063,64986,1212,63357,291,62445,65046,62468,64599,63405,64619,65036,65050,
1419,232,3182,1110,4392,1982,4809,2641,4401,2945,3221,2787,1483,2202,65029,1321,
63242,295,62089,64914,61877,64318,62618,64184,64114,64490,432,65109,2201,354,3529,1150,
4144,1804,3889,2139,2813,2042,1098,1492,64624,578,62755,65016,61470,63981,61008,63258,
61474,62973,62751,63135,64507,63683,782,64477,2249,65373,3031,634,2965,1149,2115,1233,
648,851,64300,61,62458,64586,61125,63586,60620,62851,61068,62544,62334,62694,64163,63265,
606,64120,2273,65098,3309,460,3596,1108,3075,1359,1788,1176,65515,584,63630,65252,
62132,64337,61390,63622,61585,63308,62682,63480,64424,64052,851,64886,2612,313,3823,1269,
4255,2011,3851,2351,2701,2245,975,1701,64638,887,63052,23,62168,64845,62213,64472,
63187,64528,64835,64971,1268,201,3065,1135,4343,2078,4898,2818,4626,3209,3534,3139,
1820,2622,65372,1739,63599,710,62485,65350,62280,64783,63004,64637,64455,64889,714,65450,
2439,703,3788,1591,4493,2356,4402,2811,3433,2831,1779,2377,65378,1542,63582,538,
62308,65126,61826,64469,62276,64211,63593,64368,65404,64875,1602,79,2814,910,3435,1618,
3465,2071,2762,2167,1320,1796,64923,1011,62949,0,61473,64543,60854,63791,61249,63435,
62497,63482,64234,63895,477,64606,1981,65450,2944,680,3188,1228,2623,1437,1331,1196,
65123,493,63317,65037,61884,64033,61202,63262,61466,62869,62546,62883,64187,63276,450,63989,
2060,64905,3166,272,3597,986,3260,1384,2152,1317,540,797,64307,65510,62802,64599,
61950,63821,61999,63370,62948,63362,64518,63799,781,64601,2395,65531,3572,880,4094,1620,
3794,2051,2764,2081,1176,1683,64872,913,63219,0,62145,64727,61907,64204,62557,64062,
63862,64294,65458,64843,1510,68,2763,872,3404,1533,3309,1889,2426,1854,885,1402,
64568,617,62855,65248,61659,64449,61270,63892,61807,63646,63078,63761,64731,64227,857,64938,
2222,206,3013,963,3061,1450,2382,1552,1093,1225,64926,520,63140,65123,61754,64222,
61139,63554,61462,63193,62576,63246,64128,63691,237,64414,1711,65257,2713,540,3019,1171,
2538,1439,1345,1253,65250,640,63536,65351,62171,64513,61503,63864,61703,63522,62765,63575,
64431,64014,769,64767,2462,165,3629,1082,4032,1757,3604,2052,2453,1929,783,1384,
64511,591,63010,65313,62185,64597,62252,64187,63179,64187,64655,64588,890,65310,2596,702,
3893,1671,4520,2491,4360,2976,3408,2967,1851,2450,58,1654,63942,800,62891,92,
62715,65172,63447,65049,64845,65300,1016,311,2712,1080,4003,1925,4637,2653,4508,3086,
3547,3047,1969,2565,75,1758,63840,834,62635,65521,62241,64895,62696,64611,63885,64694,
65521,65123,1652,261,3020,1033,3840,1710,3979,2080,3307,2031,1855,1517,65493,678,
63580,65218,62168,64245,61579,63503,61859,63154,62887,63220,64356,63653,394,64331,1811,65127,
2747,329,2991,839,2399,946,1063,584,64816,65401,63000,64487,61602,63571,60939,62840,
61149,62444,62161,62433,63694,62807,65445,63501,1474,64355,2602,65186,3097,251,2861,493,
1883,345,306,65391,64055,64662,62557,63877,61763,63213,61803,62835,62615,62838,64045,63227,
223,63957,1906,64951,3252,455,3995,1321,3955,1816,3115,1857,1622,1433,65390,700,
63819,65430,62848,64745,62683,64299,63313,64181,64598,64440,699,65054,2395,406,3778,1417,
4634,2334,4743,2922,4028,3004,2607,2605,806,1879,64622,998,63400,181,62881,65067,
63221,64743,64284,64788,248,65218,1866,435,3231,1312,4091,2108,4241,2614,3664,2706,
2380,2352,627,1631,64430,715,63118,65340,62505,64613,62694,64243,63538,64212,64886,64545,
884,65191,2291,499,3267,1347,3577,1940,3053,2102,1765,1774,5,1076,63733,185,
62265,64775,61450,63993,61417,63484,62134,63301,63469,63510,65109,64095,1085,64901,2193,173,
2663,778,2380,1002,1341,811,65291,195,63519,64835,62015,63878,61176,63090,61195,62623,
61983,62527,63319,62801,64904,63404,919,64261,2132,65186,2764,426,2615,849,1685,831,
223,381,64104,65155,62643,64288,61686,63533,61474,63062,62046,62945,63257,63191,64826,63768,
891,64635,2219,53,3022,865,3093,1338,2336,1396,909,1016,64752,345,63199,65072,
62163,64344,61841,63855,62273,63629,63345,63717,64791,64148,763,64895,2051,249,2858,1047,
3003,1574,2389,1707,1115,1403,64971,700,63251,65333,61966,64463,61436,63805,61734,63442,
62695,63430,64121,63811,171,64476,1590,65327,2526,574,2748,1099,2210,1273,1015,1055,
64948,495,63333,65275,62044,64502,61317,63838,61316,63439,62032,63359,63303,63580,64854,64159,
798,65002,1863,314,2304,948,1994,1204,1009,1034,65127,515,63567,65322,62289,64555,
61594,63920,61648,63492,62415,63363,63753,63637,65372,64296,1438,65171,2730,519,3424,1212,
3381,1613,2531,1569,1083,1096,64961,372,63505,65125,62601,64438,62449,63956,63067,63772,
64306,63957,363,64561,1993,65454,3331,913,4095,1770,4119,2271,3408,2340,2118,2012,
556,1438,64606,733,63580,7,63252,64977,63667,64721,64708,64885,632,65451,2253,776,
3685,1727,4626,2628,4827,3253,4150,3435,2734,3158,951,2536,64778,1724,63550,897,
63019,210,63237,65319,64095,65222,65399,11,1365,689,2766,1520,3792,2313,4127,2805,
3592,2816,2309,2350,552,1545,64278,594,62816,65184,62003,64399,61979,63870,62711,63711,
63976,63959,65476,64543,1352,65340,2400,610,2824,1190,2491,1388,1438,1167,65375,589,
63578,65344,62097,64507,61255,63753,61237,63256,61944,63109,63195,63368,64776,63931,836,64714,
2113,29,2764,714,2659,1066,1835,1012,461,564,64438,65387,63071,64571,62218,63845,
62027,63352,62512,63159,63600,63355,65066,63940,1105,64813,2486,243,3334,1062,3429,1499,
2784,1508,1510,1158,65468,581,64010,65429,63018,64753,62680,64231,63044,64044,64076,64314,
69,65014,1779,463,3283,1497,4269,2415,4538,3049,4059,3261,2920,3028,1385,2449,
65398,1666,64268,840,63700,134,63811,65254,64557,65184,266,65495,1776,619,3188,1483,
4135,2263,4412,2764,3910,2893,2700,2636,1094,2042,65029,1240,63727,371,62967,65151,
62909,64678,63521,64577,64642,64876,506,18,1855,911,2855,1787,3275,2429,2987,2708,
1967,2587,414,2080,64258,1298,62822,364,61945,65005,61755,64312,62214,63961,63224,64034,
64603,64511,503,65263,1671,524,2240,1118,2093,1359,1182,1180,65301,661,63722,65432,
62363,64546,61507,63725,61299,63131,61796,62857,62905,62942,64404,63411,429,64193,1694,65068,
2371,236,2327,610,1572,636,311,329,64376,65277,63039,64520,62136,63744,61834,63138,
62187,62881,63165,63048,64584,63623,636,64470,2061,65432,2981,794,3169,1419,2651,1671,
1548,1505,112,984,64245,269,63184,65102,62692,64542,62844,64212,63596,64195,64839,64567,
772,65284,2118,638,3033,1452,3296,1972,2843,2125,1745,1905,238,1302,64212,483,
62950,65140,62223,64364,62157,63857,62777,63750,64001,64096,18,64824,1507,223,2561,1116,
2942,1772,2592,2062,1521,1871,65507,1277,63891,422,62577,65013,61744,64181,61520,63569,
61946,63274,63008,63404,64416,63972,325,64784,1479,76,2039,720,1859,1055,1001,998,
65206,535,63767,65310,62528,64403,61714,63538,61534,62895,62005,62579,63112,62698,64645,63243,
739,64108,2079,65040,2874,276,2952,762,2309,838,1132,529,65209,65411,63759,64582,
62725,63766,62398,63164,62754,62898,63699,63082,65098,63710,1144,64613,2553,58,3413,932,
3566,1582,3006,1864,1879,1710,489,1235,64697,601,63693,65490,63232,64938,63418,64610,
64250,64660,32,65118,1603,397,3107,1370,4171,2270,4536,2945,4163,3254,3177,3150,
1737,2668,182,1894,64430,1050,63653,284,63520,65242,64108,65047,65272,65271,1188,286,
2538,1033,3493,1789,3809,2334,3411,2569,2418,2403,1025,1853,65032,1018,63705,63,
62808,64671,62504,63959,62869,63646,63861,63813,65255,64367,1175,65139,2314,422,2830,1071,
2596,1372,1696,1235,371,698,64375,65422,62937,64460,61906,63524,61479,62778,61765,62380,
62718,62474,64160,63016,216,63851,1531,64737,2291,65469,2337,370,1714,420,574,80,
64698,64959,63402,64124,62463,63231,62053,62524,62341,62259,63302,62451,64738,63069,802,63960,
2233,64950,3157,314,3395,930,2937,1143,1902,955,578,443,64767,65251,63703,64436,
63180,63774,63312,63443,64120,63532,65456,64066,1589,64965,3176,488,4253,1482,4665,2205,
4323,2531,3330,2423,2034,1994,673,1330,65013,506,64285,65310,64184,64795,64734,64646,
324,64927,1736,65535,3052,778,3952,1536,4254,2090,3906,2315,2983,2190,1635,1762,
102,1097,64273,305,63349,65088,63028,64533,63377,64327,64379,64545,240,65137,1639,388,
2676,1196,3114,1819,2877,2152,2049,2128,799,1754,64875,1043,63518,82,62482,64637,
61996,63874,62199,63472,63058,63478,64291,63871,43,64541,1095,65310,1663,382,1649,692,
1045,660,65511,294,64166,65179,62885,64338,61944,63460,61520,62797,61701,62466,62524,62564,
63874,63048,65386,63786,1107,64639,1867,65414,1987,382,1470,543,466,367,64703,65406,
63415,64682,62398,63888,61834,63188,61912,62794,62622,62784,63824,63152,65256,63865,1013,64742,
1854,22,2089,640,1783,999,990,1021,65373,681,64076,28,62917,64736,62186,64002,
62068,63571,62669,63601,63891,64094,65428,64906,1361,301,2448,1197,2921,1894,2706,2243,
1825,2149,473,1611,64498,778,63209,65359,62321,64493,62032,63915,62397,63702,63327,63925,
64636,64554,484,65410,1602,765,2181,1482,2090,1912,1365,2003,180,1675,64329,955,
62954,6,61911,64600,61447,63887,61734,63543,62688,63631,64057,64081,65512,64767,1144,65516,
1791,590,1772,918,1109,904,65494,540,64126,65388,62795,64467,61761,63521,61268,62760,
61416,62318,62221,62313,63529,62745,65027,63479,799,64320,1615,65073,1868,76,1529,303,
707,152,65135,65221,63943,64541,62940,63797,62400,63158,62511,62781,63363,62849,64787,63366,
814,64185,2198,65114,3187,507,3627,1291,3425,1749,2647,1817,1503,1460,201,765,
64581,65509,63877,64852,63789,64554,64408,64658,21,65127,1468,351,2846,1307,3875,2259,
4335,3005,4184,3445,3534,3548,2452,3259,1188,2635,65470,1801,64509,907,64091,210,
64347,65406,65271,65531,1051,544,2367,1319,3319,2068,3655,2637,3349,2920,2449,2855,
1203,2444,65320,1701,63923,748,62821,65308,62283,64528,62454,64106,63298,64156,64593,64710,
457,47,1575,915,2209,1591,2301,2010,1839,2046,880,1688,65088,976,63688,3,
62539,64516,61912,63662,61985,63176,62713,63143,63915,63520,65309,64183,992,64982,1769,160,
1966,628,1593,775,740,575,65088,31,63777,64783,62613,63930,61926,63175,61957,62706,
62711,62657,64013,63067,65517,63813,1363,64712,2347,72,2778,822,2574,1241,1777,1225,
579,822,64782,192,63606,65037,62893,64414,62869,64061,63555,64096,64759,64519,698,65247,
2078,618,3093,1577,3573,2385,3476,2875,2894,2993,1922,2741,731,2240,65145,1609,
64387,996,64232,561,64779,445,408,670,1870,1177,3235,1849,4304,2576,4841,3203,
4782,3573,4149,3588,3028,3239,1621,2608,220,1801,64650,966,64116,290,64297,65518,
65144,107,834,583,2067,1308,3051,2124,3569,2866,3534,3365,2941,3478,1824,3187,
359,2511,64441,1614,63264,646,62601,65333,62639,64808,63332,64670,64466,64870,176,65315,
1174,334,1695,816,1650,1094,1070,1101,86,800,64341,221,62965,64987,61824,64130,
61171,63369,61174,62915,61846,62842,63051,63146,64440,63700,159,64385,1067,65045,1490,45,
1397,389,743,454,65251,191,64050,65171,62971,64464,62269,63814,62139,63385,62679,63278,
63803,63541,65199,64101,997,64811,2012,57,2465,714,2369,1113,1750,1170,676,865,
64890,264,63608,65054,62684,64339,62413,63852,62858,63732,63936,64021,65339,64678,1192,32,
2260,968,2889,1713,3026,2183,2581,2271,1580,2000,257,1419,64424,589,63333,65278,
62798,64628,62923,64326,63689,64420,64836,64858,466,65533,1366,774,1839,1489,1874,1985,
1350,2134,325,1857,64549,1254,63206,430,62114,65125,61533,64439,61652,64059,62440,64050,
63704,64365,65111,64965,774,163,1591,881,1894,1425,1612,1628,821,1398,65171,758,
63808,65380,62571,64362,61807,63458,61728,62869,62380,62691,63535,62968,64855,63568,528,64309,
1391,65038,1765,32,1612,296,987,217,65535,65353,64387,64711,63360,64006,62774,63417,
62798,63101,63452,63144,64611,63518,456,64160,1736,64969,2642,270,3115,1055,3105,1647,
2602,1884,1644,1677,385,1143,64644,445,63736,65303,63407,64828,63742,64686,64634,64942,
262,65483,1415,657,2386,1387,2957,2058,3062,2629,2675,2968,1848,2888,739,2380,
65180,1622,64402,839,64131,244,64482,0,65350,133,1001,573,2223,1229,3216,1991,
3860,2732,4003,3223,3526,3306,2491,2936,1061,2191,65096,1249,63869,286,63171,65016,
63155,64481,63776,64357,64814,64605,463,65136,1471,295,2154,979,2432,1500,2243,1719,
1527,1513,384,880,64579,65517,63339,64503,62615,63626,62605,63033,63193,62793,64201,62914,
65319,63312,752,63923,1461,64596,1758,65187,1568,22,836,65531,65226,65037,63854,64209,
62651,63295,61944,62533,61896,62011,62526,61826,63696,61998,65119,62516,910,63271,1969,64170,
2632,64953,2790,65443,2383,3,1443,65272,195,64760,64554,64167,63765,63605,63601,63205,
64130,63132,65154,63385,906,63921,2171,64656,3138,65445,3699,681,3766,1310,3293,1664,
2394,1599,1256,1179,115,579,64785,65522,64472,65120,64817,64979,250,65136,1552,27,
2884,626,4021,1339,4768,2027,5021,2515,4675,2710,3765,2531,2471,1993,1135,1212,
65530,385,64872,65276,64754,64933,65183,64961,523,65357,1589,469,2594,1296,3283,2149,
3508,2863,3148,3183,2224,3027,907,2473,64996,1669,63793,786,63162,37,63147,65131,
63681,64993,64563,65141,99,65523,1126,483,1870,999,2113,1403,1837,1555,1019,1363,
65314,818,63870,65506,62605,64554,61803,63716,61675,63146,62162,62851,63105,62838,64245,63130,
65327,63702,666,64465,1177,65165,1218,49,775,80,65452,65317,64338,64764,63230,64035,
62448,63307,62214,62762,62571,62535,63461,62716,64687,63229,432,63970,1484,64818,2089,68,
2171,648,1688,872,669,675,64859,126,63459,64911,62366,64197,61915,63723,62155,63512,
62972,63575,64136,63968,65357,64688,870,51,1640,951,2020,1647,1874,1957,1185,1848,
90,1324,64404,500,63448,65145,62998,64435,63160,64030,63871,63955,64934,64169,537,64643,
1489,65314,2104,521,2236,1160,1818,1549,919,1583,65195,1261,63833,668,62617,65460,
61813,64753,61596,64224,62053,63957,63013,63975,64218,64352,65394,64997,771,233,1259,893,
1292,1288,835,1297,65428,860,64160,41,62910,64556,62058,63600,61769,62871,62109,62506,
62905,62536,63963,62927,65065,63626,415,64424,896,65098,883,65489,362,65501,64945,65136,
63787,64491,62701,63696,62018,62954,61986,62490,62642,62435,63799,62707,65189,63268,1045,64005,
2199,64772,3009,65508,3359,571,3126,904,2345,919,1212,672,82,288,64813,65426,
64540,65148,64827,65069,63,65256,1051,175,2122,891,3075,1738,3703,2518,3921,3079,
3614,3330,2765,3279,1560,2940,328,2417,64948,1793,64588,1244,64804,856,65500,716,
1032,928,2213,1458,3235,2191,3948,2939,4241,3534,3989,3857,3124,3825,1758,3407,
196,2732,64311,1944,63392,1210,63164,652,63588,394,64463,488,65470,859,857,1454,
1579,2128,1992,2683,1932,2943,1347,2863,310,2430,64579,1686,63448,840,62777,41,
62682,64966,63136,64638,63989,64655,65052,65003,619,8,1506,637,1982,1187,1881,1496,
1196,1438,72,998,64251,244,62988,64896,62147,63997,61943,63253,62341,62762,63209,62622,
64316,62842,65527,63349,1101,64007,1879,64636,2154,65086,1868,65188,1067,64934,65477,64417,
64384,63804,63603,63229,63329,62848,63655,62787,64455,63085,79,63698,1374,64574,2504,65535,
3248,876,3455,1504,3010,1740,2042,1613,780,1224,65082,746,64217,267,63877,65433,
64164,65319,64993,65528,626,462,1889,1125,3080,1850,4031,2532,4519,3034,4475,3248,
3866,3156,2771,2781,1516,2218,473,1576,65412,974,65323,540,162,355,845,438,
1703,859,2536,1556,3255,2350,3666,3052,3469,3393,2624,3339,1315,2979,65440,2354,
64259,1552,63486,706,63254,65521,63545,65090,64238,65021,65216,65268,767,214,1662,797,
2133,1296,2051,1554,1378,1472,167,1054,64202,406,62769,65135,61730,64284,61304,63593,
61525,63164,62228,63087,63206,63402,64299,63983,65284,64710,454,65399,744,311,435,429,
65176,198,64188,65215,63195,64500,62524,63796,62362,63251,62703,62985,63543,63059,64690,63457,
365,64155,1450,65008,2261,344,2583,1017,2349,1368,1532,1348,334,992,64619,397,
63628,65281,63060,64662,63061,64248,63603,64208,64509,64493,65,65030,1166,253,2017,1061,
2454,1754,2388,2165,1799,2176,808,1861,65237,1307,64373,632,63910,65514,63898,65021,
64356,64817,65170,64943,627,65348,1643,442,2378,1135,2642,1678,2250,1935,1299,1915,
65509,1612,64129,1050,62958,348,62114,65171,61699,64614,61810,64292,62412,64209,63371,64383,
64456,64833,65380,65417,445,473,571,914,188,1083,64887,913,63757,407,62640,65215,
61886,64404,61624,63690,61863,63197,62539,63050,63479,63226,64530,63661,65510,64197,687,64691,
909,65023,524,65072,65162,64809,63958,64212,62834,63457,62047,62730,61768,62164,62063,61841,
62872,61814,64054,62151,65422,62832,1201,63691,2230,64565,2746,65230,2601,18,1877,92,
818,65529,65231,65283,64401,64985,64034,64754,64177,64643,64796,64727,175,65095,1217,176,
2243,934,3014,1721,3377,2429,3173,2873,2408,2971,1270,2715,103,2226,64750,1663,
64302,1146,64339,777,64851,593,236,686,1439,1059,2685,1634,3705,2299,4234,2876,
4191,3262,3559,3377,2513,3190,1252,2721,81,2068,64778,1389,64388,867,64487,592,
65069,604,413,888,1298,1330,2005,1783,2372,2080,2233,2150,1573,1964,481,1501,
64729,829,63586,67,62838,64852,62639,64222,62930,63841,63580,63742,64535,63969,101,64438,
1089,64974,1702,65442,1735,193,1121,212,24,65415,64299,64846,63158,64195,62400,63582,
62072,63038,62244,62613,62957,62441,64016,62610,65184,63013,790,63510,1725,63980,2191,64304,
2077,64400,1418,64278,410,63965,64932,63527,64190,62993,63881,62522,64032,62277,64623,62378,
32,62835,1251,63545,2509,64432,3483,65319,3964,460,3819,829,3111,841,2051,565,
947,163,65534,65311,64935,64950,64845,64723,65304,64749,711,65073,1915,142,3140,934,
4156,1742,4699,2337,4704,2605,4129,2455,3056,1979,1889,1329,942,685,269,165,
65514,65352,164,65222,760,65327,1619,150,2525,709,3265,1356,3674,2018,3593,2438,
2937,2539,1781,2276,466,1746,64731,1042,63778,293,63310,65208,63330,64816,63784,64751,
64635,65020,179,65521,1168,535,1799,1012,1825,1255,1246,1202,222,920,64491,425,
63250,65341,62326,64707,61778,64077,61696,63595,62165,63301,63081,63315,64187,63671,65255,64219,
533,64778,842,65184,553,65323,65353,65184,64386,64790,63397,64209,62609,63519,62212,62869,
62242,62452,62759,62346,63681,62542,64808,62969,414,63627,1274,64358,1668,64968,1523,65318,
855,65360,65381,65163,64292,64746,63370,64198,62746,63677,62616,63360,62998,63337,63767,63634,
64799,64230,376,64993,1320,266,1865,920,1834,1286,1264,1389,326,1263,64838,979,
63980,607,63462,209,63368,65397,63696,65176,64472,65208,3,65532,1137,536,2095,1158,
2644,1713,2634,2042,2033,2103,978,1920,65201,1536,63929,980,62969,390,62446,65420,
62480,65099,62974,65022,63835,65227,64838,48,262,489,907,901,1051,1129,700,1125,
65453,838,64415,319,63305,65151,62445,64413,61997,63781,62064,63319,62545,63124,63357,63186,
64384,63507,65316,63930,402,64293,595,64549,321,64647,65170,64549,64246,64203,63282,63691,
62452,63074,61973,62549,62011,62218,62611,62136,63632,62312,64914,62748,672,63424,1724,64253,
2328,65011,2402,28,1955,274,1152,233,215,65509,64976,65193,64553,64970,64571,64915,
65015,65070,382,65457,1564,535,2764,1306,3707,2071,4198,2645,4128,2980,3529,3047,
2537,2887,1404,2508,408,1943,65279,1359,65026,920,65278,749,486,942,1563,1395,
2725,1954,3726,2503,4301,2920,4386,3164,3899,3250,2870,3139,1617,2830,441,2353,
65069,1869,64590,1532,64563,1399,65015,1531,255,1871,1120,2318,1898,2795,2360,3178,
2325,3352,1755,3295,739,2993,65053,2471,63913,1822,63097,1162,62696,598,62760,246,
63252,136,64134,285,65261,646,776,1070,1462,1433,1637,1671,1247,1691,371,1434,
64746,919,63539,200,62540,64946,61960,64270,61960,63797,62516,63610,63467,63696,64629,63979,
277,64326,1218,64625,1704,64828,1625,64864,1072,64678,177,64278,64788,63765,64042,63240,
63604,62783,63617,62496,64047,62426,64914,62651,557,63131,1789,63831,2775,64621,3344,65347,
3389,318,2890,558,1999,548,957,317,65510,65511,64782,65134,64430,64868,64596,64848,
65308,65093,842,43,2018,694,3084,1428,3853,2167,4057,2738,3659,3021,2855,2958,
1882,2621,976,2135,322,1618,24,1173,154,941,722,1012,1612,1356,2609,1858,
3468,2447,3980,3002,3973,3417,3406,3615,2407,3496,1270,3108,149,2484,64711,1757,
64053,1092,63830,606,64160,373,64942,425,432,660,1383,949,1949,1159,1986,1206,
1521,1082,646,807,65063,340,63916,65259,62900,64540,62172,63871,61876,63436,62075,63267,
62770,63331,63778,63592,64850,63962,236,64392,721,64783,596,64958,65459,64918,64471,64667,
63436,64268,62526,63787,61925,63306,61784,62911,62154,62744,62941,62897,64074,63347,65301,63943,
742,64556,1248,65082,1277,65455,817,75,67,46,64704,65290,63896,64822,63366,64379,
63191,64051,63428,63937,64052,64109,64949,64494,408,65046,1291,126,1790,665,1768,1000,
1230,1066,387,918,64982,611,64147,187,63554,65278,63307,64956,63582,64891,64373,65088,
65497,65514,1226,586,2279,1205,2928,1739,3106,2122,2743,2271,1924,2159,837,1814,
65230,1292,64173,681,63418,162,63159,65368,63482,65289,64212,65435,65129,243,420,681,
900,1030,913,1209,465,1161,65183,907,64068,469,62899,65348,62004,64631,61468,64031,
61386,63657,61759,63537,62559,63631,63604,63869,64651,64214,65427,64622,188,64916,2,65022,
64938,64866,64104,64475,63181,63929,62330,63310,61778,62707,61680,62265,62082,62109,62925,62266,
64091,62697,65320,63264,796,63899,1447,64558,1573,65088,1277,65412,638,65442,65359,65202,
64562,64840,64061,64540,63971,64403,64351,64455,65154,64731,756,65270,2009,423,3061,1171,
3687,1914,3748,2434,3263,2623,2374,2559,1321,2238,285,1757,64956,1247,64474,847,
64520,691,65089,851,535,1258,1658,1814,2703,2485,3440,3081,3750,3490,3536,3616,
2874,3441,1970,3068,977,2581,130,2061,65142,1619,65103,1379,19,1418,791,1692,
1668,2099,2450,2529,2946,2873,3055,3089,2612,3109,1661,2829,440,2257,64745,1469,
63787,664,63219,65516,63057,65013,63329,64713,64038,64608,65056,64723,552,65015,1268,65328,
1529,8,1270,46,537,65330,65017,64817,63831,64092,62737,63293,61937,62569,61649,62061,
61991,61858,62906,61960,64096,62289,65295,62759,733,63245,1286,63622,1333,63795,830,63640,
65509,63176,64521,62547,63617,61866,62965,61291,62716,60930,62960,60862,63671,61051,64772,61474,
493,62091,1581,62770,2294,63442,2558,64023,2405,64417,1906,64563,1175,64493,401,64265,
65315,63971,64969,63744,65047,63696,115,63923,1108,64396,2181,65024,3147,185,3789,878,
3992,1457,3705,1772,3026,1736,2126,1397,1214,891,485,333,50,65366,88,65096,
615,65147,1498,65461,2579,483,3605,1156,4338,1763,4590,2248,4209,2464,3274,2373,
2050,2017,787,1465,65173,838,64286,273,63824,65385,63946,65232,64628,65369,46,170,
953,596,1528,1036,1676,1336,1421,1414,793,1245,65375,782,64238,156,63173,65043,
62337,64424,61920,63974,62022,63760,62675,63807,63651,64087,64686,64482,65500,64871,368,65147,
324,65261,65348,65174,64549,64872,63589,64455,62621,63911,61867,63348,61567,62964,61777,62817,
62424,62879,63410,63135,64494,63538,65424,64015,473,64490,604,64805,260,64871,65143,64698,
64278,64312,63367,63780,62601,63219,62197,62742,62397,62544,63146,62720,64238,63175,65442,63773,
914,64421,1542,65061,1706,29,1353,309,576,316,65167,84,64186,65239,63331,64851,
62829,64574,62844,64524,63425,64704,64442,65090,184,146,1364,815,2205,1415,2579,1844,
2513,2084,2004,2040,1235,1712,366,1202,64972,588,64194,21,63867,65221,64080,65228,
64731,65468,26,302,773,800,1233,1253,1322,1520,1020,1518,308,1187,64789,521,
63608,65196,62565,64351,61802,63579,61555,63063,61911,62874,62721,62978,63724,63258,64662,63642,
65401,64025,253,64322,187,64452,65273,64338,64543,63991,63650,63456,62739,62841,62094,62308,
61922,61971,62279,61900,63042,62050,64101,62398,65191,62892,597,63547,1224,64244,1443,64788,
1223,65083,657,65155,65374,65047,64526,64798,63900,64474,63634,64209,63878,64155,64654,64391,
224,64855,1472,65489,2608,722,3445,1503,3775,2142,3558,2464,2941,2431,2033,2093,
1015,1515,103,927,65057,543,64983,414,65440,513,754,820,1761,1349,2643,1994,
3217,2566,3430,2984,3259,3205,2762,3190,2035,2951,1213,2516,426,2054,65467,1746,
65424,1648,400,1780,1354,2155,2478,2719,3430,3363,4018,3998,4169,4538,3776,4823,
2915,4746,1685,4293,346,3569,64595,2736,63638,1971,63167,1420,63191,1045,63709,884,
64550,993,65437,1292,612,1639,999,1950,910,2094,355,1945,65058,1445,64024,621,
62965,65180,62138,64283,61753,63633,61896,63259,62504,63180,63393,63382,64436,63846,65401,64420,
628,64996,947,65386,768,65406,183,65061,64847,64453,63910,63726,63106,62974,62689,62386,
62767,62084,63309,62002,64218,62103,65313,62399,774,62810,1493,63220,1867,63575,1802,63836,
1291,63912,520,63802,65243,63654,64556,63544,64180,63504,64233,63559,64760,63709,122,64013};

unsigned int buf0cpy[256] ={0};
int ptr = 0;
#pragma arm section
unsigned int len = 48;
unsigned int i2sinttimes;

/*
******************************************************************************
**            VOID BSP_I2SInit(void)
**
** Description  : I2S init
** Arguments    :                       
** Returns      : 
** Author       :                                   
** Date         : 
**
******************************************************************************
*/
void BSP_I2SInit(void)  
{
    int reg_val;

    /////////////////////////////////
    // config i2s reg
    reg_val  = 0;
    NST_WR_I2S_REG(reg_val,I2S_CTRL);

#ifdef USE_I2S_16_BIT
    reg_val |= (0x2B <<  0);       // tx sample rate: 44kHz; 120MHz/44.1kHz/32bit/2 = 0x2B; Algorithm 1 on page 78
    reg_val |= (0x0f << 11);       // tx resolution: 16bit
    reg_val |= (0x2B << 16);       // rx sample rate
    reg_val |= (0x0f << 27);       // rx RESOLUTION
#else
    reg_val |= (0x2B <<  0);       // tx sample rate: 44kHz; 120MHz/44.1kHz/32bit/2 = 0x2B; Algorithm 1 on page 78
    reg_val |= (0x17 << 11);       // tx resolution: 24bit
    reg_val |= (0x2B << 16);       // rx sample rate
    reg_val |= (0x17 << 27);       // rx RESOLUTION
#endif
    NST_WR_I2S_REG(reg_val,I2S_SRR);
  
    reg_val  = 0;
    reg_val |= (0x18 <<  0);       // almost empty
    reg_val |= (0x1B << 16);       // almost full
    NST_WR_I2S_REG(reg_val,I2S_TFIFO_CTRL);
    NST_WR_I2S_REG(reg_val,I2S_RFIFO_CTRL);
}

/*
******************************************************************************
**            VOID BSP_I2SStart(void)
**
** Description  : I2S Start
** Arguments    :                       
** Returns      : 
** Author       :                                   
** Date         : 
**
******************************************************************************
*/
void BSP_I2SStart(void)  
{
    int reg_val;

    /////////////////////////////////
    // config i2s reg halt i2s
    reg_val  = 0;
    reg_val |= (0x00 <<  0);       // set all clk strobe bits to 0 (enable all clk)
    reg_val |= INTR_EN|CHN0_INTR_EN;  // enable interrupt request generation after underrun / overrun condition occurrence in I2S channel 0.
    NST_WR_I2S_REG(reg_val,I2S_CID_CTRL);
  
#ifdef USE_PWM
    reg_val  = 0;
    reg_val |= ((0x1 << 0) <<  0); // enable channel 0
    reg_val |= ((0x1 << 1) <<  0); // enable channel 1
    reg_val |= ((0x1 << 0) <<  8); // set channel 0 tx
    reg_val |= ((0x0 << 1) <<  8); // set channel 1 rx
    reg_val |= (0x00 << 16);       // no channel loop back (in this case, loop back outside the chip)
    reg_val |= (0x1  << 20);       // clear sfr rst
    reg_val |= (0x0  << 21);       // set tx to slave (although transmit data, do not gen tsck, loop back from rsck!)
    reg_val |= (0x0  << 22);       // set rx to master (not receive data, only gen clk for transmit data!)
    reg_val |= (0x0f << 23);       // clear rst of tfifo/rfifo/tsync/rsync
    reg_val |= (0x0  << 27);       // tsync loop back
    reg_val |= (0x1  << 28);       // no rsync loop back
    NST_WR_I2S_REG(reg_val,I2S_CTRL);
    regdat = PWM_EN|PWM_SAMPLE_RATE_441000|PWM_CHN0;
    NST_WR_I2S_REG(regdat,I2S_PWM_CONF);  
#else
    reg_val  = 0;
    reg_val |= ((0x1 << 0) <<  0); // enable channel 0
    reg_val |= ((0x1 << 1) <<  0); // enable channel 1
    reg_val |= ((0x1 << 0) <<  8); // set channel 0 tx
    reg_val |= ((0x0 << 1) <<  8); // set channel 1 rx
    reg_val |= (0x00 << 16);       // no channel loop back (in this case, loop back outside the chip)
    reg_val |= (0x1  << 20);       // clear sfr rst
    reg_val |= (0x0  << 21);       // set tx to slave (although transmit data, do not gen tsck, loop back from rsck!)
    reg_val |= (0x1  << 22);       // set rx to master (not receive data, only gen clk for transmit data!)
    reg_val |= (0x0f << 23);       // clear rst of tfifo/rfifo/tsync/rsync
    reg_val |= (0x1  << 27);       // tsync loop back
    reg_val |= (0x0  << 28);       // no rsync loop back
    NST_WR_I2S_REG(reg_val,I2S_CTRL);
    NST_WR_I2S_REG(TRAN_REC_I2S_RIGHT_MODE,I2S_DEV_CONF);  
#endif  

#ifdef USE_I2S_DMA
    BSP_DmaStart(buf0cpy,(UINT32 *)(_I2S_BASE_ADR+NI2S_FIFO_BASE), DMA_CHANNEL_0);
#endif //USE_I2S_DMA

}

/*
******************************************************************************
**            VOID BSP_I2SHalt(void)
**
** Description  : I2S Halt
** Arguments    :                       
** Returns      : 
** Author       :                                   
** Date         : 
**
******************************************************************************
*/
void BSP_I2SHalt(void)  
{
    int reg_val;

    /////////////////////////////////
    // config i2s reg halt i2s
    reg_val  = NST_RD_I2S_REG(I2S_CID_CTRL);
    reg_val |= (0x03 <<  0);       // set channel0&channel1 clk strobe bits to 1 (block clk)
    //reg_val |= (0x1ffff << 15);    // set all irq mask bits to 1 (mask all irq)
    //reg_val &= (INTR_DIS&0xffffffff);
    NST_WR_I2S_REG(reg_val,I2S_CID_CTRL);
	
#ifdef USE_PWM
    /////////////////////////////////
    //config pwm reg mute pwm 
    reg_val  = NST_RD_I2S_REG(I2S_PWM_CONF);
    reg_val |= PWM_MUTE;     
    NST_WR_I2S_REG(regdat,I2S_PWM_CONF);
#endif

#ifdef USE_I2S_DMA
    BSP_DmaHalt(DMA_CHANNEL_0);
#endif //USE_I2S_DMA
}

/*
******************************************************************************
**            VOID BSP_I2SMute(void)
**
** Description  : I2S Mute,I2S disable for a while
** Arguments    :                       
** Returns      : 
** Author       :                                   
** Date         : 
**
******************************************************************************
*/
void BSP_I2SMute(void)  
{
    int reg_val ;
	
    /////////////////////////////////
    // config i2s reg,set i2s mute
    reg_val  = NST_RD_I2S_REG(I2S_CTRL);
    reg_val &= (~(0x1 << 0) );    // disable channel 0
    reg_val &= (~(0x1 << 1) );
    NST_WR_I2S_REG(reg_val,I2S_CTRL);
	
#ifdef USE_PWM
    /////////////////////////////////
    //config pwm reg mute pwm 
    reg_val  = NST_RD_I2S_REG(I2S_PWM_CONF);
    reg_val |= PWM_MUTE;     
    NST_WR_I2S_REG(regdat,I2S_PWM_CONF);
#endif
	
}

/*
******************************************************************************
**            VOID BSP_I2SSound(void)
**
** Description  : I2S sound enable, opposite to BSP_I2SMute
** Arguments    :                       
** Returns      : 
** Author       :                                   
** Date         : 
**
******************************************************************************
*/
void BSP_I2SSound(void)  
{
    int reg_val ;

    /////////////////////////////////
    // config i2s reg, clear i2s mute
    reg_val  = NST_RD_I2S_REG(I2S_CTRL);
    reg_val |= ((0x1 << 0) );    // enable channel 0
    reg_val |= ((0x1 << 1) );
    NST_WR_I2S_REG(reg_val,I2S_CTRL);
	
#ifdef USE_PWM
    /////////////////////////////////
    //config pwm reg clear pwm mute
    reg_val  = NST_RD_I2S_REG(I2S_PWM_CONF);
    reg_val &= (~PWM_MUTE);     
    NST_WR_I2S_REG(regdat,I2S_PWM_CONF);
#endif

}

/*
******************************************************************************
**            VOID BSP_I2SDeinit(void)
**
** Description  : I2S Deinit
** Arguments    :                       
** Returns      : 
** Author       :                                   
** Date         : 
**
******************************************************************************
*/
void BSP_I2SDeinit(void)  
{
    int reg_val;

    // config i2s reg
    reg_val  = 0;
    NST_WR_I2S_REG(reg_val,I2S_CTRL);
  
    reg_val  = 0;
    reg_val |= (0xFF <<  0);       // set all clk strobe bits to 1 (block all clk)
    reg_val |= (0x0 << 15);        // set all irq mask bits to 0 (disable all irq)
    NST_WR_I2S_REG(reg_val,I2S_CID_CTRL);
	
}

/*
******************************************************************************
**             INT32 BSP_I2SWrite(UINT8 *pBuf, UINT32 Len)
**
** Description  : I2S write in Polling mode,just an example
polling mode:
        you must copy audio data to NI2S_FIFO_BASE
** Arguments    : 
                  buf0: write buffer
                  Len: write len
** Returns      : 
** Author       :                                   
** Date         : 
**
******************************************************************************
*/
void BSP_I2SWrite(void * buf,  unsigned int len)
{
    unsigned int * cur = buf;		
    //int regdat = 0;
    int idx = 0;
    unsigned int temp = 0;
	
    while(1)
    {
        stat = NST_RD_I2S_REG(I2S_TFIFO_STAT);
        //regdat = 0; 
        //NST_WR_I2S_REG(regdat, I2S_STAT);
        if(stat<20)
        {
            temp = *cur;
            temp &=0xffff;
            regdat = (unsigned int)(temp<<16);//due to the i2s config, if i2s set 16bit
            regdat |= temp;
            //regdat = flag*16383;
            NST_WR_I2S_REG(regdat,NI2S_FIFO_BASE);
            NST_WR_I2S_REG(regdat,NI2S_FIFO_BASE);
            //*((unsigned int *)NI2S_FIFO_BASE)= (unsigned int)((*cur1)<<0);//due to the i2s config
            //if(idx<2048)
            //buf1[idx] = (unsigned int )regdat;
            cur += 1;
            idx++;
            //if((unsigned int)cur0-(unsigned int)buf0>len)
            if (idx>=len)
            {
                idx = 0;
                cur=buf;
            }
        }	
    }
	
}

/*
******************************************************************************
**                        VOID BSP_I2SDMAWrite(VOID)
**
** Description  : I2S write in DMA mode,just an example
DMA mode:
        if use DMA, you must copy audio data to DMASAR,and set DMADAR to NI2S_FIFO_BASE
        NST_WR_DMA_REG(DMAC_SAR0 ,buf0cpy);
        NST_WR_DMA_REG(DMAC_DAR0 ,_I2S_BASE_ADR+NI2S_FIFO_BASE);
** Arguments    : 
**
******************************************************************************
*/
void BSP_I2SDMAWrite(void)
{
    int i = 0;
    unsigned short s_temp = 0;
    
#ifdef USE_I2S_DMA_INT
    //8K
    ptr +=  DMA_TRANSFER_SIZE * 2;
    if(ptr>=0x2000)
        ptr = 0;
    for(i=0;i< DMA_TRANSFER_SIZE * 2;i++)
    {
        //I2S16bitDMA32bit,16bit16bit0
        s_temp = buf0[i+ptr];
        buf0cpy[i] = (unsigned int)(s_temp);           
    }

    BSP_DmaStart(buf0cpy, (UINT32 *)(_I2S_BASE_ADR+NI2S_FIFO_BASE), DMA_CHANNEL_0);
#endif //USE_I2S_DMA_INT

}

/*
******************************************************************************
**                        VOID BSP_I2SIntISR(VOID)
**
** Description  : I2S INT ISR
** Arguments    :                              
** Returns      : 
** Author       :                                   
** Date         : 
**
******************************************************************************
*/
void BSP_I2SIntISR(void)
{
    UINT32 i2s_tfifo_stat =0;
    UINT32 i2s_rfifo_stat =0;
    UINT32 i2s_stat =0;
    UINT32 reg_val;

   NVIC_DisableIRQ(I2S_IRQn);
   NVIC_ClearIRQChannelPendingBit(I2S_IRQn);

   reg_val  = 0;
   NST_WR_I2S_REG(reg_val,I2S_CID_CTRL);
   
   i2s_tfifo_stat = NST_RD_I2S_REG(I2S_TFIFO_STAT);
   i2s_rfifo_stat = NST_RD_I2S_REG(I2S_RFIFO_STAT);
   i2s_stat = NST_RD_I2S_REG(I2S_STAT);
   DBGPRINT(DEBUG_INFO, "I2s int tsts 0x%x  rsts 0x%x  i2ssts 0x%x \n", i2s_tfifo_stat,i2s_rfifo_stat,i2s_stat);

   if(i2s_stat & 0x00000001) 
      NST_WR_I2S_REG(i2s_stat & 0xFEEE, I2S_STAT);

   reg_val  = 0;
   reg_val |= (0x00 <<  0);       // set all clk strobe bits to 0 (enable all clk)
   reg_val |= INTR_EN|CHN0_INTR_EN;
   NST_WR_I2S_REG(reg_val,I2S_CID_CTRL);

   i2sinttimes ++;
   NVIC_EnableIRQ(I2S_IRQn);

}
#endif
/*
******************************************************************************
**                            End Of File                                    **
******************************************************************************
*/

